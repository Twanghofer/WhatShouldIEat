<main>
  <h1 class="mat-display-2">Meal Generator</h1>

  <div fxLayout="column" fxLayoutGap="35px">
    <div
      *ngFor="let meals of mealCategories; index as i"
      fxLayout="column"
      fxLayoutGap="15px"
    >
      <h1 class="font-capital">{{ meals[mealIndices[i]].category }}</h1>
      <div
        fxLayout="row"
        fxLayout.xs="column"
        fxLayoutGap="15px"
        fxLayoutAlign="start start"
      >
        <mat-expansion-panel fxFlex="1 2 auto">
          <mat-expansion-panel-header>
            <mat-panel-title fxFlex="25" fxLayoutAlign="start center">
              {{ meals[mealIndices[i]].name }}</mat-panel-title
            >
            <mat-panel-description
              fxFlex="40"
              fxFlex.sm="60"
              fxFlex.xs="60"
              fxLayoutAlign="space-between center"
            >
              <div>
                <ng-container
                  *ngFor="
                    let star of getRecipeRating(meals[mealIndices[i]].rating)
                  "
                  [ngSwitch]="star"
                >
                  <i *ngSwitchCase="0.5" class="material-icons">star_half</i>
                  <i *ngSwitchCase="1" class="material-icons">star</i>
                  <i *ngSwitchDefault class="material-icons">star_border</i>
                </ng-container>
              </div>
              <div>
                <ng-container
                  *ngFor="let time of getRecipeTime(meals[mealIndices[i]].time)"
                  [ngSwitch]="time"
                >
                  <i *ngSwitchCase="1" class="material-icons">watch_later</i>
                  <i *ngSwitchDefault class="material-icons">schedule</i>
                </ng-container>
              </div>
            </mat-panel-description>
          </mat-expansion-panel-header>

          <p>{{ meals[mealIndices[i]].description }}</p>
          <div fxLayout="row wrap">
            <ng-container
              *ngFor="let img of meals[mealIndices[i]].images; index as a"
            >
              <img *ngIf="a < 3" [src]="img" fxFlex="50%" />
            </ng-container>
          </div>

          <mat-action-row>
            <a
              mat-raised-button
              [href]="meals[mealIndices[i]].url"
              target="_blank"
            >
              Zum Rezept
            </a>
          </mat-action-row>
        </mat-expansion-panel>
        <button mat-button (click)="getNewRecipe(i)" class="full-width-mobile">
          <a class="mobile-only">Get Random </a>
          <i class="material-icons">shuffle</i>
        </button>
      </div>
    </div>
    <button mat-raised-button (click)="getRandomRecipes()">
      Get new Recipes
      <i class="material-icons">shuffle</i>
    </button>
  </div>
</main>
